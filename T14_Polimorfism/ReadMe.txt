Замена условной логики полиморфизмом
Сейчас система не готова к расширению. К сожалению при добавление нового способа оплаты, нам нужно модифицировать все ифы которые совершают те или иные действия с разными системами.

Необходимо зафиксировать интерфейс платежёной системы и сокрыть их многообразие под какой-нибудь сущностью. Например фабрикой (или фабричным методом).

Важное условие: пользователь вводит именно идентификатор платёжной системы.

https://gist.github.com/HolyMonkey/14f78ed72bda289980fce43f50143278